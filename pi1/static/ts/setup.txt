includeLibs.tx_wecassessment_pi1 = EXT:wec_assessment/pi1/class.tx_wecassessment_pi1.php
plugin.tx_wecassessment_pi1 = USER_INT

plugin.tx_wecassessment_pi1 {
	userFunc = tx_wecassessment_pi1->main
	
	# General Configuration options
	usePaging = 0
	questionsPerPage = 2
	allowAnonymous = 1
	
	# Label Configuration options
	minimumValue = 0
	maximumValue = 2
	answerLabels {
		0 = Never, ever, ever.
		1 = Every now and then.
		2 = Every stinkin day.
	}
	
	# Template file
	templateFile = EXT:wec_assessment/pi1/assessment.tmpl
	
	# The progress bar.
	# @todo 	Should the progress bar be moved inside of questions?
	progress = COA
	progress {
		10 = TEXT
		10.value = <div class="bar" style="width:{field:percentComplete}%;">&nbsp;</div>
		10.wrap = <div class="outline">|</div>
		10.insertData = true
		
		20 = TEXT
		20.value = <p>Page {field:currentPage} of {field:totalPages}</p>
		20.insertData = true
		
		stdWrap.wrap = <div id="wec-assessment-progress"> | </div>
	}
	
	# Wrapper for questions
	questions {

		# Individual question text.
		question = COA
		question {
			10 = TEXT
			10.field = text
			10.wrap = <p>|</p>
		}
		
		# Individual items in the list of answers to a question.
		scaleItem = TEXT
		scaleItem {
			field = label
			wrap = <div><input type="radio" name="tx_wecassessment_pi1[answers][{field:questionUID}]" id="scale_{field:questionUID}_{field:uid}" value="{field:uid}" {field:checked} /><label for="scale_{field:questionUID}_{field:uid}">|</label></div>
			insertData = true
		}
		
		# Wrap for the entire question and possible answers
		stdWrap.wrap = <fieldset class="question">|</fieldset>
	}
	
	# Wrapper for recommendations
	recommendations {
		# Possible types are assessment, category, and question.
		recommendation = CASE
		recommendation.key.field = type
		
		# Default cause: Show any parent information, the score, and the recommendation text.
		recommendation.default = COA
		recommendation.default {
			10 = TEXT
			10.field = parentTitle
			10.wrap = <h3>|</h3>
			
			15 = TEXT
			15.field = parentText
			15.wrap = <p>|</p>
			
			20 = TEXT
			20.field = score
			20.wrap = <p>Score:&nbsp;|&nbsp;/&nbsp;{field:maxScore}</p>
			20.insertData = true
			
			30 = TEXT
			30.field = text
			30.wrap = <p>|</p>
			30.parseFunc < tt_content.text.20.parseFunc
		    

			wrap = <div class="recommendation">|</div>
		}
		
		# Category recommendations: Also show the category image
		recommendation.category < plugin.tx_wecassessment_pi1.recommendations.recommendation.default
		recommendation.category {
			12 = IMAGE
			12 {
				file.import = uploads/tx_wecassessment/
				file.import {
					field = parentImage
					listNum = 0
				}
				altText.field = parentTitle
			}
		}
	}
	
	
}